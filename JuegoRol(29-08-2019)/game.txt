importgreenfoot.*;//(World,Actor,GreenfootImage,GreenfootandMouseInfo)importjava.util.*;importjava.io.*;importjava.lang.*;/***WriteadescriptionofclassMyWorldhere.**@author(JoseSilva)*@version(1.25/08/2019)*/publicclassKopruluextendsWorld{//losatributosp1Razayp2Razacontienenlaespeciedeljugador1yeljugador2respectivamente,estaselesfueasignadadurantelaanteriorpantalladeselecciondepersonajepublicStringp1Raza,p2Raza,raceWin="";privatebooleanbar1State=false,bar2State=false,bar3State=false;//estosatributosesparasabersielobjetoHealthBarestainstanciadoono.//Contadoresdelosrecursos,estossonglobales,esdecir,cuentanlosrecursosqueagarrantodoslosconstructoresdeunjugadorintiteraciones=0;finalintmaxIteraciones=1000;CounterGcont1=newCounter();CounterGcont2=newCounter();CounterGcont3=newCounter();//contadoresparacontarlaenergiadecadamiembrodelaraza,puestoquehayunacondicionyesqueunmiembrodeunarazapuedetenermax160deenergia.EnergyCountercont1=newEnergyCounter();EnergyCountercont2=newEnergyCounter();EnergyCountercont3=newEnergyCounter();HealthBarbar1;//Aquilosdeclaro,noseinstanciantodaviaporquenohaylainformacionsuficienteparallenarlosparametrosdelconstructor,seinstancianenlosfordelmetodoHealthBarbar2;//generarExtraterrestres()HealthBarbar3;HealthBarbarIter=newHealthBar("Iteraciones","",0,maxIteraciones,Color.ORANGE);//Listas(secreanacaparapoderaccederaellasenlassubclasesdeActor)List<Deposito>listDeposits=newArrayList<Deposito>();List<Protoss>listProtoss=newArrayList<Protoss>();List<Terran>listTerran=newArrayList<Terran>();List<Zerg>listZerg=newArrayList<Zerg>();List<Comando>listComando=newArrayList<Comando>();List<HealthCenter>listHealthCenter=newArrayList<HealthCenter>();/***NotesequeparacrearunmundodetipoMyWorldhayqueenviarledosparametros,estosparametroscorrespodenalarazadelosdosjugadores,siendop1larazadeljugador1yp2larazadeljugador2.*/publicKoprulu(Stringp1,Stringp2,intiteraciones){super(1200,800,1);this.p1Raza=p1;this.p2Raza=p2;newWorld();this.iteraciones=iteraciones;}publicvoidnewWorld(){addObject(barIter,615,773);creating();putCounters();putCounters2();Comandocomando=newComando("Comando1");addObject(comando,113,525);Comandocomando2=newComando("Comando2");addObject(comando2,1076,257);listComando.add(comando);listComando.add(comando2);HealthCenterh=newHealthCenter();addObject(h,150,80);HealthCenterh1=newHealthCenter();addObject(h1,1050,720);listHealthCenter.add(h);listHealthCenter.add(h1);}publicvoidact(){barIter.add(1);iteraciones++;if(iteraciones==maxIteraciones){PlayerChoicewinner=null;Stringmessage;message=checkWin();if(!message.equals("Empate!")){SmallScreenmessageBox=newSmallScreen(message,getHeight()/2,getWidth()/2,999999);winner=newPlayerChoice(this.raceWin);addObject(messageBox,getWidth()/2,getHeight()/2);addObject(winner,592,462);Greenfoot.stop();}else{SmallScreenmessageBox=newSmallScreen(message,getHeight()/2,getWidth()/2,999999,"");addObject(messageBox,getWidth()/2,getHeight()/2);Greenfoot.stop();}}openFile();agregarRegistro();cerrar();checkStatus();Stringkey=Greenfoot.getKey();if("p".equals(key)){for(inti=0;i<listProtoss.size();i++){listProtoss.get(i).setControlState(false);}}if("o".equals(key)){for(inti=0;i<listProtoss.size();i++){listProtoss.get(i).setControlState(true);}}if("z".equals(key)){for(inti=0;i<listZerg.size();i++){listZerg.get(i).setControlState(false);}}if("x".equals(key)){for(inti=0;i<listProtoss.size();i++){listZerg.get(i).setControlState(true);}}if("t".equals(key)){for(inti=0;i<listTerran.size();i++){listTerran.get(i).setControlState(false);}}if("y".equals(key)){for(inti=0;i<listTerran.size();i++){listTerran.get(i).setControlState(true);}}}publicvoidcreating(){crearObstaculos(8);crearDepositos(3);crearDepositosDeGas(3);generarExtraterrestres(p1Raza,5,110,120);generarExtraterrestres(p2Raza,5,1000,1020);}publicintgetIteraciones(){returniteraciones;}publicList<HealthCenter>getHealthC(){returnlistHealthCenter;}publicList<Comando>getComando(){returnlistComando;}publicStringgetp1Raza(){returnp1Raza;}publicStringgetp2Raza(){returnp2Raza;}publicvoidcrearDepositosDeGas(intcantidad){for(inti=0;i<cantidad;i++){GasDepositg=newGasDeposit();//aquiutilizoelmetodogetRandomNumberRangeparaagregarlosobjetosenciertorango,estoparaquenosegenerenenlasesquinasdelmundoypuedanocasionarproblemas.addObject(g,getRandomNumberRange(300,700),getRandomNumberRange(100,700));}}publicvoidcrearObstaculos(intcantidad){for(inti=0;i<cantidad;i++){Obstaculoo=newObstaculo();//aquiutilizoelmetodogetRandomNumberRangeparaagregarlosobjetosenciertorango,estoparaquenosegenerenenlasesquinasdelmundoypuedanocasionarproblemas.addObject(o,getRandomNumberRange(300,700),getRandomNumberRange(100,700));}}publicvoidcrearDepositos(intnum){for(inti=0;i<num;i++){Depositod=newDeposito();addObject(d,getRandomNumberRange(300,700),getRandomNumberRange(100,700));}listDeposits=getObjects(Deposito.class);}//acacreolosmetodos"get"delaslistasdeobjetosparapoderinteractuarconestosenlassubclasesdeActor.publicListgetDepositList(){returnlistDeposits;}publicListgetProtossList(){returnlistProtoss;}publicListgetZergList(){returnlistZerg;}publicListgetTerranList(){returnlistTerran;}/*ElmetodogenerarExtraterrestressirveparacrearelmismonumerodemiembrosdeunarazaparalosjugadores*elparametroStringacorrespondealarazaquequeremoscrear,*elparametrointnumcorrespondealnumerodemiembrosdeunarazaquequeremoscrear(elroldecadamiembroseponealazar)*elparamtrointstartcorrespondedesdequepartedelmapasevanagenerarlosextraterrestres.*elparametrointendcorrespondehastaquepartedelmapasevanagenerarlosextraterrestres.*/publicvoidgenerarExtraterrestres(Stringraza,intnum,intstart,intend){ArrayList<EnergyCounter>listCont1=newArrayList<EnergyCounter>();ArrayList<EnergyCounter>listCont2=newArrayList<EnergyCounter>();ArrayList<EnergyCounter>listCont3=newArrayList<EnergyCounter>();intenergiaTotal=0;if(raza=="Protoss"){for(inti=0;i<num;i++){//notesequeleestoyenviandocomoparametroaProtoss"generarParametro()"esemetodoretornaunvalortipostring,ysufuncionesgenerarunrolalazar.EnergyCountercont=newEnergyCounter();Protossp=newProtoss(generarParametro(),cont,Gcont1);//elmetodogetRandomNumberestamasabajodelcodigoypermiteescogerunnumeroalazarqueesteentrestartyendintx=getRandomNumberRange(start,end);//ledoyalgetrandomNumberelparametrogetHeightqueeslaalturadelmapaparaquemegenereunnumeroalazarde0agetHeight.inty=getRandomNumberRange(50,getHeight()-50);if(y==525||y==257){y+=15;}addObject(p,x,y);energiaTotal+=p.getEnergia();cont.setProtoss(p);listCont1.add(cont);}bar1=newHealthBar("Protoss","",energiaTotal,160*num);this.bar1State=true;for(inti=0;i<listCont1.size();i++){listCont1.get(i).putHealthBar(bar1);}bar1.setState(true);//acainicializoelvalordelcontadortotaldeenergiaparalosmiembrosdelarazaProtoss//acaleenviolainstanciatotal1delaclaseEnergiaTotal,estoesparaquelaclaseEnergyCounteryEnergiaTotalpuedaninteractuar.//acaobtengotodaslasinstanciasdelaClaseProtossylosguardoenunalistadenomindalistProtoss.listProtoss=getObjects(Protoss.class);}elseif(raza=="Terran"){for(inti=0;i<num;i++){//paraestoseslomismo,sepuedebasarsegunloqueescribienelfordelprimerifEnergyCountercont2=newEnergyCounter();Terrant=newTerran(generarParametro(),cont2,Gcont2);intx=getRandomNumberRange(start,end);inty=getRandomNumberRange(50,getHeight()-50);if(y==525||y==257){y+=15;}addObject(t,x,y);energiaTotal+=t.getEnergia();cont2.setTerran(t);listCont2.add(cont2);}bar2=newHealthBar("Terran","",energiaTotal,160*num);this.bar2State=true;for(inti=0;i<listCont2.size();i++){listCont2.get(i).putHealthBar(bar2);}bar2.setState(true);listTerran=getObjects(Terran.class);}elseif(raza=="Zerg"){for(inti=0;i<num;i++){EnergyCountercont3=newEnergyCounter();Zergz=newZerg(generarParametro(),cont3,Gcont3);intx=getRandomNumberRange(start,end);inty=getRandomNumberRange(50,getHeight()-50);if(y==525||y==257){y+=15;}addObject(z,x,y);energiaTotal+=z.getEnergia();cont3.setZerg(z);listCont3.add(cont3);}bar3=newHealthBar("Zerg","",energiaTotal,160*num);this.bar3State=true;for(inti=0;i<listCont3.size();i++){listCont3.get(i).putHealthBar(bar3);}bar3.setState(true);listZerg=getObjects(Zerg.class);}}//Estemetodosirveparagenerarlosrolesalazaryasignarlosmientrasestoycreandounnumerodemiembrosdeunaespecie.publicStringgenerarParametro(){intopc=Greenfoot.getRandomNumber(3);Stringaux;switch(opc){case0:aux="Guerrero";break;case1:aux="Constructor";break;case2:aux="Medico";break;default:aux="Guerrero";break;}returnaux;}/*estemetodotieneelnombreparecidoaelmetododegreenfootgetRandomNumber(dehechotieneelmismonombre),peroojo,queaestemetodohayqueenviarledosparametros,escomosobrecarga,estemetodoloquehaceessegunelparametroinicialyfinalqueyolemande,megeneraunnumerodentrodeeserango,esbastantemejorqueelmetododegreenfootgetRandomNumberquesologeneraunnumerode0alparametroqueudlede.*/publicintgetRandomNumberRange(intstart,intend){intnormal=Greenfoot.getRandomNumber(end-start+1);returnnormal+start;}publicvoidputCounters(){if(p1Raza=="Protoss"){addObject(Gcont1,82,42);addObject(bar1,267,42);}elseif(p1Raza=="Zerg"){addObject(Gcont3,82,42);addObject(bar3,267,42);}elseif(p1Raza=="Terran"){addObject(Gcont2,82,42);addObject(bar2,267,42);}}publicvoidputCounters2(){if(p2Raza=="Protoss"){addObject(Gcont1,924,42);addObject(bar1,1102,42);}elseif(p2Raza=="Zerg"){addObject(Gcont3,924,42);addObject(bar3,1102,42);}elseif(p2Raza=="Terran"){addObject(Gcont2,924,42);addObject(bar2,1102,42);}}publicvoidcheckStatus(){PlayerChoiceganador=null;Stringmessage;message=checkWin();if(bar1State){if(bar2State){if(bar1.getValue()==0||getProtossList().isEmpty()){SmallScreenmessageBox=newSmallScreen(message,getHeight()/2,getWidth()/2,999999);ganador=newPlayerChoice("Terran");addObject(messageBox,getWidth()/2,getHeight()/2);addObject(ganador,592,462);Greenfoot.stop();}elseif(bar2.getValue()==0||getTerranList().isEmpty()){SmallScreenmessageBox=newSmallScreen(message,getHeight()/2,getWidth()/2,999999);ganador=newPlayerChoice("Protoss");addObject(messageBox,getWidth()/2,getHeight()/2);addObject(ganador,592,462);Greenfoot.stop();}}else{if(bar1.getValue()==0||getProtossList().isEmpty()){SmallScreenmessageBox=newSmallScreen(message,getHeight()/2,getWidth()/2,999999);ganador=newPlayerChoice("Zerg");addObject(messageBox,getWidth()/2,getHeight()/2);addObject(ganador,592,462);Greenfoot.stop();}elseif(bar3.getValue()==0||getZergList().isEmpty()){SmallScreenmessageBox=newSmallScreen(message,getHeight()/2,getWidth()/2,999999);ganador=newPlayerChoice("Protoss");addObject(messageBox,getWidth()/2,getHeight()/2);addObject(ganador,592,462);Greenfoot.stop();}}}if(bar2State){if(bar3State){if(bar2.getValue()==0||getTerranList().isEmpty()){SmallScreenmessageBox=newSmallScreen(message,getHeight()/2,getWidth()/2,999999);ganador=newPlayerChoice("Zerg");addObject(messageBox,getWidth()/2,getHeight()/2);addObject(ganador,592,462);Greenfoot.stop();}elseif(bar3.getValue()==0||getZergList().isEmpty()){SmallScreenmessageBox=newSmallScreen(message,getHeight()/2,getWidth()/2,999999);ganador=newPlayerChoice("Terran");addObject(messageBox,getWidth()/2,getHeight()/2);addObject(ganador,592,462);Greenfoot.stop();}}}}publicStringcheckWin(){Stringmessage="";if(bar1State){if(bar2State){if(bar1.getValue()>bar2.getValue()){message="Protossganó!";this.raceWin="Protoss";}elseif(bar1.getValue()==bar2.getValue()){message="Empate!";}elseif(bar1.getValue()<bar2.getValue()){message="Terranganó!";this.raceWin="Terran";}}else{if(bar1.getValue()>bar3.getValue()){message="Protossganó!";this.raceWin="Protoss";}elseif(bar1.getValue()==bar3.getValue()){message="Empate!";}elseif(bar1.getValue()<bar3.getValue()){message="Zergganó!";this.raceWin="Zerg";}}}if(bar3State){if(bar2State){if(bar3.getValue()>bar2.getValue()){message="Zergganó!";this.raceWin="Zerg";}elseif(bar3.getValue()==bar2.getValue()){message="Empate!";}elseif(bar3.getValue()<bar2.getValue()){message="Terranganó!";this.raceWin="Terran";}}}returnmessage;}privateFormatterx;privateScannery;publicvoidopenFile(){try{x=newFormatter("game.txt");y=newScanner(newFile("Koprulu.java"));}catch(Exceptione){System.out.println("Hayunerror");}}publicvoidagregarRegistro(){while(y.hasNext()){Stringa=y.next();x.format("%s",a);}}publicvoidcerrar(){x.close();y.close();}}